<main>
    <div class="table-upper">
        <div class="upper-table-search">
            <input type="text" [(ngModel)]="searchUserText" (input)="searchUser()" placeholder="Search User Details"/>
        </div>
        <div class="upper-table-btns">
            <div class="file-upload-wrapper" data-text="Upload (.csv) File Here">
                <!-- <input type="file" name="file" class="file-upload-field" id="inputGroupFile" required (change)="importCSV($event)" accept=".csv , application/vnd.openxmlformats-officedocument.spreadsheetml.sheet , application/vnd.ms-excel" /> -->
            </div>
            <button (click)="exportCSV()" class="exportCSVBtn">Export CSV <span><i class="fa-solid fa-file-export"></i></span></button>
            <button routerLink="/form"   class="addUserBtn">Add User <span><i class="fa-solid fa-user-plus"></i></span></button>
            <!-- <button (click)="openFormModal()" class="addUserBtn">Add User <span><i class="fa-solid fa-user-plus"></i></span></button> -->
        </div>
    </div>
    <div class="table-responsive text-nowrap">
        <table class="table table-striped table-n table-hover table-bordered">
            <thead>
                <tr>
                    <th></th>
                    <th class="fname_cell">First Name <span (click)="fname_sort()" id="fname_sort"><i
                                class="fa-solid fa-filter"></i></span></th>
                    <th>Last Name <span (click)="lname_sort()" id="lname_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>Age <span (click)="age_sort()" id="age_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>Email <span (click)="email_sort()" id="email_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>Phone <span (click)="phone_sort()" id="phone_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>Password <span (click)="password_sort()" id="password_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>Gender <span (click)="gender_sort()" id="gender_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>Hobbies <span (click)="hobbies_sort()" id="hobbies_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>Skills <span (click)="skill_sort()" id="skills_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>Country <span (click)="country_sort()" id="country_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>State <span (click)="state_sort()" id="state_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>City <span (click)="city_sort()" id="city_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th>About <span (click)="about_sort()" id="about_sort"><i class="fa-solid fa-filter"></i></span></th>
                    <th class="update_cell">Update</th>
                    <th class="delete_cell">Delete</th>
                </tr>
            </thead>
            <tbody id="tbody">
                <tr *ngFor="let user of allUsers | paginate: { itemsPerPage: 10, currentPage: p }">
                    <td><button (click)="showUserInfo(user)"><i class="fa-solid fa-circle-info"></i></button></td>
                    <td>{{user.first_name}}</td>
                    <td>{{user.last_name}}</td>
                    <td>{{user.age}}</td>
                    <td>{{user.email}}</td>
                    <td>{{user.phone}}</td>
                    <td>{{user.password}}</td>
                    <td>{{user.gender}}</td>
                    <td>{{user.hobbies}}</td>
                    <td>{{user.skill}}</td>
                    <td>{{user.country}}</td>
                    <td>{{user.state}}</td>
                    <td>{{user.city}}</td>
                    <td>{{user.description}}</td>

                    <td><button (click)="openUpdateFormModal(user)" class="update_btn">Update <span><i class="fa-solid fa-user-pen"></i></span></button></td>

                    <td><button (click)="deleteUserId(user.id);deletePopupShow = !deletePopupShow" class="delete_btn">Delete <span><i class="fa-solid fa-user-xmark"></i></span></button></td>
                </tr>
            </tbody>
        </table>
    </div>
    <pagination-controls (pageChange)="p = $event"></pagination-controls>
    <!-- <div class="table_bottom">
        <div class="col-6">
            <div class="pagination_input_main pagination_input_main">
                <p class="pagination-title">Rows Per Page</p>
                <select (change)="pagination($event)" class="pagination_select select_field register_input" name="pagination_row_inp" id="pagination_row_inp">
                    <option value="10" selected>10</option>
                    <option value="20">20</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
        <div class="col-6">
            <div class="pagination_btn_main d-flex" id="prev_page">
                <button class="register_btn pagination_btn" id="register_btn"><i
                        class="fa-solid fa-arrow-left-long"></i></button>
                <div id="allPaginationBtn"></div>
                <div class="pagination_btn_count" *ngFor="let x of paginationBtns">
                    <button (click)="pageChange(x.count, x.row)" class="register_btn pagination_btn">{{x.count}}</button>
                </div>
                <button class="register_btn pagination_btn" id="next_page"><i
                        class="fa-solid fa-arrow-right-long"></i></button>
            </div>
        </div>
    </div> -->
    <div [ngClass]="deletePopupShow?'d-block':'d-none'" id="userInfoModal">
        <h5>Are you sure want to Move User To Trash!!</h5>
        <div class="btns-main">
            <button class="popup_btn popup_cancle" (click)="deletePopupShow = !deletePopupShow">Cancle</button>
            <button (click)="deleteRow();deletePopupShow = !deletePopupShow" class="popup_btn popup_delete">Delete</button>
        </div>
    </div>
</main>